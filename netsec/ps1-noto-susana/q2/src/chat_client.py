import socketimport argparseimport jsonimport selectimport sysdef main(args):        username = args.u    server_ip = args.sip    server_port = args.sp    # initalizes client socket    client_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)    # signs in the client based on arguments    sign_in_message = {"type": "SIGN-IN", "username": username}    client_socket.sendto(json.dumps(sign_in_message).encode(), (server_ip, server_port))    # creates the command line look for input    print("+> ", end="", flush=True)    # loops while the program is running    while True:        try:            # reads sock info            read_sockets, _, _ = select.select([client_socket, sys.stdin], [], [])            # for each recponse in socket            for s in read_sockets:                if s == client_socket:                    # receieves the data                    data, _ = client_socket.recvfrom(1024)                    try:                        # decodes the info                        response = json.loads(data.decode())                        # if message, print who its from and info                        if response.get("type") == "MESSAGE":                            sender = response.get("sender")                            message = response.get("message")                            print(f"\n<– {sender}: {message}")                            print("+> ", end="", flush=True)                        # if list, print the users in the system                        elif response.get("type") == "LIST":                            users = response.get("users")                            print(f"\n<– Signed In Users: " + ", ".join(users))                            print("+> ", end="", flush=True)                        # if it is an error, print error message                        elif response.get("type") == "ERROR":                            print(f"\n<– Error: {response.get('message')}")                            print("+> ", end="", flush=True)                        # if server gives info for message to be send, directly send the message                        elif response.get('type') == "INFO":                            recipient_ip = response.get('ip')                            recipient_port = response.get('port')                            recipient = response.get("recipient")                            message_to_send = response.get("message")                            socket_for_message = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)                            message = json.dumps({'type': 'MESSAGE', 'sender': username, 'message': message_to_send})                            socket_for_message.sendto(message.encode(), (recipient_ip, recipient_port))                            socket_for_message.close()                            print("+> ", end="", flush=True)                    # catches if server sends incorrect format message                    except json.JSONDecodeError:                        print("Invalid message.")                        print("+> ", end="", flush=True)                # if user inputs more commands                elif s == sys.stdin:                    user_input = sys.stdin.readline().rstrip()                    # if list, send list message to server                    if user_input.lower() == "list":                        list_message = {"type": "LIST"}                        client_socket.sendto(json.dumps(list_message).encode(), (server_ip, server_port))                    # if send, get info from client to send message directly                    elif user_input.lower().startswith("send"):                        parts = user_input.split(" ", 2)                        if len(parts) >= 3:                            recipient = parts[1]                            message = parts[2]                            message_request = {"type": "GET_INFO", "recipient": recipient, "message": message}                            client_socket.sendto(json.dumps(message_request).encode(), (server_ip, server_port))                        # invalid format for send                        else:                            print("Invalid send command")                            print("+> ", end="", flush=True)                    # creates a clean exit from chat                    elif user_input.lower() == "exit":                        print("\nExiting...")                        exit()                   # creates format for input                    else:                        print("+> ", end="", flush=True)        # exits for keyboard interruption        except KeyboardInterrupt:            print("\nExiting...")            break        # prints error        except Exception as e:            print(f"Client Error: {e}")if __name__ == "__main__":    # parses command line arguments    parser = argparse.ArgumentParser()    parser.add_argument("-u", type=str, required=True, help="Username")    parser.add_argument("-sip", type=str, required=True, help="Server IP")    parser.add_argument("-sp", type=int, required=True, help="Server port")    args = parser.parse_args()    main(args)